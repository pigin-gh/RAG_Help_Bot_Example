# ü§ñ RAG Telegram Bot

Telegram-–±–æ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ RAG (Retrieval-Augmented Generation) –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

<div align="center">
   <img src="https://github.com/user-attachments/assets/b297d9ad-93aa-4c80-af40-f59fa11dfada" width="200" style="display: inline-block; margin: 0 10px;" />
   <img src="https://github.com/user-attachments/assets/5baf7069-e2f5-4da3-a975-34783586d991" width="200" style="display: inline-block; margin: 0 10px;" />
   <img src="https://github.com/user-attachments/assets/cb9613a8-7dee-4488-b426-2b5dbab0b30b" width="200" style="display: inline-block; margin: 0 10px;" />
</div>

<div align="center" style="margin-top: 20px;">
    <a href="https://t.me/ecvi_support_bot" target="_blank">
      <strong>ü§ñ –ü–µ—Ä–µ–π—Ç–∏ –≤ –±–æ—Ç–∞: @ecvi_support_bot</strong>
    </a>
  </div>

## ‚ú® –£–ª—É—á—à–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîç –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫
- **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (FAISS)** - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ —Å–º—ã—Å–ª—É
- **BM25 –ø–æ–∏—Å–∫** - –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- **Re-ranking** - —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —É—á–µ—Ç–æ–º –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤

### üéØ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤
- **–ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—ã–π re-ranking**: —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤, —Å–µ–º–∞–Ω—Ç–∏–∫–∞, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥**: –æ—Ç–≤–µ—Ç—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤

### üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- **Rate limiting**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (5 –≤ –º–∏–Ω—É—Ç—É, 30 –≤ —á–∞—Å)
- **Retry –ª–æ–≥–∏–∫–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **–ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, —á—Ç–æ –±–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å

### ü§ù –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤**: –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
- **HTML-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∫—Ä–∞—Å–∏–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.9+**
- **python-telegram-bot** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API
- **LangChain** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM
- **GigaChat** - —è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- **FAISS** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **rank_bm25** - –¥–ª—è –∫–ª—é—á–µ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (BM25)
- **HuggingFace Transformers** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (multilingual-e5-base)

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9 –∏–ª–∏ –≤—ã—à–µ
- –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ ([@BotFather](https://t.me/BotFather))
- –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ GigaChat API

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/yourusername/rag-telegram-bot.git
cd rag-telegram-bot
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `uv` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
uv venv
uv sync
```

–ò–ª–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `pip`:

```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ GigaChat API
GIGACHAT_CREDENTIALS=your_gigachat_credentials_here
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã:**
- **Telegram Bot Token**: –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather) –≤ Telegram
- **GigaChat Credentials**: –ü–æ–ª—É—á–∏—Ç–µ –Ω–∞ [—Å–∞–π—Ç–µ GigaChat](https://developers.sber.ru/gigachat)

### 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ —Å –∏–º–µ–Ω–µ–º `baza-znanii-ecvi.txt` (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –≤ –∫–æ–¥–µ).

### 5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å:

```bash
python build_vectorstore.py
# –∏–ª–∏
uv run build_vectorstore.py
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –∏–Ω–¥–µ–∫—Å –≤ –ø–∞–ø–∫–µ `vectorstore/`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞.

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python telegram_bot.py
# –∏–ª–∏
uv run telegram_bot.py
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
1. –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∏—Ç –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-3 –º–∏–Ω—É—Ç—ã)
2. –°–æ–∑–¥–∞—Å—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (2-5 –º–∏–Ω—É—Ç)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç –∏–Ω–¥–µ–∫—Å –≤ –ø–∞–ø–∫—É `vectorstore/` –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤

–ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö –∏–Ω–¥–µ–∫—Å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥).

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
- `/help` - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –õ—é–±–æ–π —Ç–µ–∫—Å—Ç - –≤–æ–ø—Ä–æ—Å –∫ –±–æ—Ç—É, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

### –ö–∞–∫ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å

1. **–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä**: –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å –ø—Ä–∏–º–µ—Ä–æ–º –≤–æ–ø—Ä–æ—Å–∞
2. **–ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π**: –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
3. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π**: –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç "‚öôÔ∏è –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–æ–ø—Ä–æ—Å..."
4. **–ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç**: –ë–æ—Ç –ø—Ä–∏—à–ª–µ—Ç –æ—Ç–≤–µ—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ telegram_bot.py          # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª Telegram –±–æ—Ç–∞
‚îú‚îÄ‚îÄ rag_service.py           # RAG —Å–µ—Ä–≤–∏—Å —Å –≥–∏–±—Ä–∏–¥–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –∏ re-ranking
‚îú‚îÄ‚îÄ user_context.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ rate_limiter.py          # Rate limiting –∏ retry –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ build_vectorstore.py     # –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ baza-znanii-ecvi.txt     # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ user_contexts.json       # –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ vectorstore/             # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ pyproject.toml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é)
‚îî‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (multilingual-e5-base)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
- –ï—Å–ª–∏ –∏–Ω–¥–µ–∫—Å —É—Å—Ç–∞—Ä–µ–ª –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ç—Ä–æ–∏—Ç—Å—è BM25 –∏–Ω–¥–µ–∫—Å –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –í–æ–ø—Ä–æ—Å
    ‚Üì
[Rate Limiter] ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
    ‚Üì
[User Context] ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚Üì
[Search] ‚Üí –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (FAISS + BM25)
    ‚Üì
[Re-ranking] ‚Üí –ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
    ‚Üì
[Context] ‚Üí –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    ‚Üì
[GigaChat] ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
    ‚Üì
[User] ‚Üí –û—Ç–≤–µ—Ç —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
```

### 3. –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "‚öôÔ∏è –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–æ–ø—Ä–æ—Å..."
- –ë–æ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
- –°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

### 4. Rate Limiting
- **5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É** –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å** –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **3 –ø–æ–ø—ã—Ç–∫–∏** retry —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

## üé® –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–ø—Ä–æ—Å —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
```
/start
‚Üí –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 5 –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–Ω–æ–ø–∫–∞–º–∏
‚Üí –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
```

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É?
‚Üí ‚öôÔ∏è –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–æ–ø—Ä–æ—Å: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É?
‚Üí ‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –æ—Ç–≤–µ—Ç...
‚Üí –û—Ç–≤–µ—Ç —Å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –í–æ–ø—Ä–æ—Å 1
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –í–æ–ø—Ä–æ—Å 2
...
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –í–æ–ø—Ä–æ—Å 6
‚Üí ‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (5)
‚Üí –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ
```

## üìä –£–ª—É—á—à–µ–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π

| –§—É–Ω–∫—Ü–∏—è | –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è | –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è |
|---------|----------------|-------------------|
| –ü–æ–∏—Å–∫ | –¢–æ–ª—å–∫–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π | –ì–∏–±—Ä–∏–¥–Ω—ã–π (FAISS + BM25) |
| –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ | –ü—Ä–æ—Å—Ç–æ–µ | –ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—ã–π re-ranking |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –ù–µ—Ç | –ò—Å—Ç–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| Rate Limit | –ù–µ—Ç | 5/30 –∑–∞–ø—Ä–æ—Å–æ–≤ |
| –ò–Ω–¥–∏–∫–∞—Ü–∏—è | –ù–µ—Ç | –ü–æ–∫–∞–∑ –∑–∞–≥—Ä—É–∑–∫–∏ |
| –ü—Ä–∏–º–µ—Ä—ã | –ù–µ—Ç | –ö–Ω–æ–ø–∫–∏ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ |
| –í—ã–≤–æ–¥ | –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ |

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–í `rag_service.py` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- `chunk_size` - —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000)
- `chunk_overlap` - –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —á–∞–Ω–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 200)
- `use_hybrid_search` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫

–í `telegram_bot.py` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- `EXAMPLE_QUESTIONS` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤
- `max_requests_per_minute` - –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
- `max_requests_per_hour` - —á–∞—Å–æ–≤–æ–π –ª–∏–º–∏—Ç

## üìù –ó–∞–º–µ—Ç–∫–∏

- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (BM25) –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å —á–µ—Ä–µ–∑ `build_vectorstore.py`
- –§–∞–π–ª `user_contexts.json` –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ git (—Å–º. `.gitignore`)

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
source .venv/bin/activate  # Linux/Mac
# –∏–ª–∏
.venv\Scripts\activate     # Windows

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python telegram_bot.py
```

–£–¥–∞—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º! üéâ
